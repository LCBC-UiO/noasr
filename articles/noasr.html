<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the MOAS-package for LCBC custom functions • noasr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the MOAS-package for LCBC custom functions">
<meta property="og:description" content="noasr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">noasr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/noasr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ggplot-branding.html">Branding ggplots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LCBC-UiO/noasr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="noasr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the MOAS-package for LCBC custom functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LCBC-UiO/noasr/blob/master/vignettes/noasr.Rmd"><code>vignettes/noasr.Rmd</code></a></small>
      <div class="hidden name"><code>noasr.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The Nephew of all Spreadsheets (NOAS) data is a database with research data from LCBC’s projects. The {noasr} R-package is created with the intent to share common operations/functions people may use on the NOAS, in order to get the data into the shape they need. This vignette is intended to showcase some of the functions currently available in the package that people may wish to use.</p>
</div>
<div id="how-to-use-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-the-package" class="anchor"></a>How to use the package</h2>
<div id="basic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h3>
<p>After the package is installed, the package needs to be called in every script or R instance to make it’s functions available.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LCBC-UiO/noasr">noasr</a></span><span class="op">)</span></code></pre></div>
<p>The package needs data from the NOAS to work. These data must usually contain at minimum the columns <code>subject_id</code>, <code>project_id</code> and <code>wave_code</code>, and a substantial amount of functions also rely on the <code>age</code> colum being present.</p>
</div>
<div id="function-documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#function-documentation" class="anchor"></a>Function documentation</h3>
<p>Like all R-functions, the {noasr}-package functions have documentation that may be accessed by typing a question mark in the console, and the function you want to know more about.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Base R</span>
<span class="op">?</span><span class="va">anova</span>
<span class="op">?</span><span class="va">t.test</span>

<span class="co"># MOAS functions</span>
<span class="op">?</span><span class="va">add_timepoint</span>
<span class="op">?</span><span class="va">fs_lmm</span></code></pre></div>
<div id="filter_site" class="section level4">
<h4 class="hasAnchor">
<a href="#filter_site" class="anchor"></a>The <code>filter_site()</code> function</h4>
<p>The <code><a href="../reference/filter_site.html">filter_site()</a></code> function is intended for use when you wish to reduce double and triple scanned data to a single line from one of the scanners. This is necessary for all analyses not using the site as a variable of interest. To run the function, you must choose which scanner you wish to keep data from.</p>
<p>There are four options:<br>
1. “long” - finds which scanner there is most data from, and keeps those (default) 2. “ousAvanto” - keeps Avanto data<br>
3. “ousSkyra” - keeps Skyra data<br>
4. “ourPrisma” - keeps Prisma data</p>
<p>If you choose the ‘long’ option, you also may specify the <code>tie</code> option, in case there is a tie for how many scans of each a participant has. By default the <code>tie</code> is set to “interval” where is will look for the scanner that has been used for the longest period of time. Again, here you may specify any one scanner and that will be picked.</p>
<p>Lastly, if there is a tie for scanner also when taking into account the interval, <code>site_order</code> takes a string vector specifying the order of priority for scanners. By default it is c(“ousPrisma”, “ousSkyra”, “ousAvanto”), meaninggiven a tie still, it will firstly pick a Prisma scan if its there, if no Prisma it will choose Skyra, and lastly Avanto.</p>
<p><strong>Note</strong>: the operation only affects double and triple scan timepoints. All participants retain the same amount of time points, but number of rows per double/triple scans is reduced to one.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simple_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/filter_site.html">filter_site</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">"long"</span>, tie <span class="op">=</span> <span class="st">"interval"</span>, site_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ousPrisma"</span>, <span class="st">"ousSkyra"</span>, <span class="st">"ousAvanto"</span><span class="op">)</span><span class="op">)</span>
<span class="va">simple_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/filter_site.html">filter_site</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">"ousAvanto"</span><span class="op">)</span>
<span class="va">simple_data</span> <span class="op">=</span> <span class="fu"><a href="../reference/filter_site.html">filter_site</a></span><span class="op">(</span><span class="va">data</span>, <span class="st">"ourPrisma"</span><span class="op">)</span></code></pre></div>
<!-- ### The `fs_lmm()` function {#fs_lmm} -->
<!-- This function will return a data.frame containing formatted data for use in Freesurfers LME models.  -->
<!-- There are specific requirements to how the data should look, and also there are operations done on the data which help our data engineer to set up analyses. -->
<!-- The function will run even without much input, but the output will not necessarily make muc sense.  -->
<!-- You must supply the function with the data you want to use. -->
<!-- Secondly, you must decide which numeric covariates and categorical (grouping) variables you want your model include. -->
<!-- `grouping.var` - a vector of strings with the names of the columns for your categorical groups. Usually, "Sex" and "Site_Name" are added here, like so: `grouping.var = c("Sex","Site_Name"). -->
<!-- `numeric.var` - a vector of strings with the names of the columns for you numeric covariates. Here we often add cognitive scores like: `numeric.var = "CVLT_A_Total`. -->
<!-- Example:  -->
<!-- ```{r fs_lmm1, eval=F} -->
<!-- fs_lmm(data, grouping.var = c("Sex","Site_Name"), numeric.var="CVLT_A_Total") -->
<!-- ``` -->
<!-- There are several other options to help you do different things. -->
<!-- the `keep` option is passed to the [`filter_site()`](#filter_site) function to handle double and triple scanned data.  -->
<!-- By default is uses the value "long", which will choose the scanner from a subject with the most data (in case of a tie, it picks the Skyra). -->
<!-- Please see the documentation of this function for more options: -->
<!-- ```{r} -->
<!-- ?fs_lmm -->
<!-- ``` -->
</div>
</div>
<div id="pipe" class="section level3">
<h3 class="hasAnchor">
<a href="#pipe" class="anchor"></a>Pipe ( %&gt;% ) compatibility</h3>
<p>All MOAS functions are pipe compatible, and should thus easily be incorporated into tidyverse-type syntax.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="va">simple_data</span> <span class="op">=</span> <span class="va">data</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">project_id</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"MemC"</span>,<span class="st">"MemP"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">na_col_rm</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># see section on Utility functions</span>
  <span class="fu"><a href="../reference/filter_site.html">filter_site</a></span><span class="op">(</span><span class="st">"ousPrisma"</span><span class="op">)</span></code></pre></div>
</div>
<div id="utility-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#utility-functions" class="anchor"></a>Utility functions</h3>
<p>Some functions in the {noasr}-package are what we call utility functions. They do not exclusively work on NOAS, they will work well on other data.frames or vectors. These functions perform operations to help clean up data or perform simple and useful operations.</p>
<div id="na_col_rm" class="section level4">
<h4 class="hasAnchor">
<a href="#na_col_rm" class="anchor"></a>The <code>na_col_rm()</code> function</h4>
<p>This function locates any column in a data.frame that has no observations (only contains <code>NA</code> or <code>NaN</code>), and removes it from the data.frame. This particularly convenient if you have subsetted the rows of data to specific observations, and want to quickly remove any columns that no longer are of consequence for the data you have.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data2</span> <span class="op">=</span> <span class="va">data</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Project_Name</span> <span class="op">%in%</span> <span class="st">"NCP"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">na_col_rm</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Athanasia Mo Mowinckel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
